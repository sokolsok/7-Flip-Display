(function(){"use strict";var e={6778:function(e,o,t){var n=t(5130),a=t(6768),r=t(4232);function l(e,o,t,n,l,i){const s=(0,a.g2)("WifiConfig"),u=(0,a.g2)("MqttData");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("h1",null,"Ninja reaction timer ("+(0,r.v_)(l.displayValue)+") ",1),o[1]||(o[1]=(0,a.Lk)("input",{type:"text",id:"number"},null,-1)),(0,a.Lk)("button",{onClick:o[0]||(o[0]=(...e)=>i.endGame&&i.endGame(...e))},"Send"),(0,a.bF)(s),(0,a.bF)(u)],64)}function i(e,o,t,n,r,l){return r.showBlock?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"block",onClick:o[0]||(o[0]=(...e)=>l.stopTimer&&l.stopTimer(...e))}," click me ")):(0,a.Q3)("",!0)}var s={props:["delay"],data(){return{showBlock:!1,timer:null,reactionTime:0}},mounted(){setTimeout((()=>{this.showBlock=!0,this.startTimer()}),this.delay)},methods:{startTimer(){this.timer=setInterval((()=>{this.reactionTime+=10}),10)},stopTimer(){clearInterval(this.timer),this.$emit("end",this.reactionTime)}}},u=t(1241);const c=(0,u.A)(s,[["render",i]]);var d=c;const p={class:"ersult"};function v(e,o,t,l,i,s){return(0,a.uX)(),(0,a.CE)("div",{class:"backdrop",onClick:o[0]||(o[0]=(0,n.D$)(((...e)=>s.closeScore&&s.closeScore(...e)),["self"]))},[(0,a.Lk)("div",p,[o[1]||(o[1]=(0,a.Lk)("p",null,"TwÃ³j czas to:",-1)),(0,a.Lk)("h1",null,(0,r.v_)(t.score),1)])])}var f={props:["score"],methods:{closeScore(){this.$emit("close")}}};const h=(0,u.A)(f,[["render",v]]);var k=h,m=t(4373),b=t(144);const y={class:"wifi-config"},g={key:0};var w={__name:"WifiConfig",setup(e){const o=(0,b.KR)(""),t=(0,b.KR)("AP"),l=(0,b.KR)(""),i=(0,b.KR)("");async function s(){try{const e=await fetch("/api/v1/mode");if(e.ok){const n=await e.json();o.value=n.mode,t.value=n.mode,l.value=n.ssid||"",i.value=""}else console.error("Failed to fetch configuration")}catch(e){console.error("Error fetching configuration:",e)}}async function u(){const e={mode:t.value};"STA"===t.value&&(e.ssid=l.value,e.password=i.value);try{const o=await fetch("/api/v1/mode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(o.ok){const e=await o.text();alert(e)}else alert("Failed to update configuration")}catch(o){console.error("Error updating configuration:",o),alert("Error updating configuration")}}return(0,a.sV)((()=>{s()})),(e,s)=>((0,a.uX)(),(0,a.CE)("div",y,[s[8]||(s[8]=(0,a.Lk)("h2",null,"Wi-Fi Configuration",-1)),(0,a.Lk)("div",null,[(0,a.Lk)("label",null,"Current Mode: "+(0,r.v_)(o.value),1)]),(0,a.Lk)("div",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio",id:"ap",value:"AP","onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e)},null,512),[[n.XL,t.value]]),s[4]||(s[4]=(0,a.Lk)("label",{for:"ap"},"Access Point (Hotspot)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"radio",id:"sta",value:"STA","onUpdate:modelValue":s[1]||(s[1]=e=>t.value=e)},null,512),[[n.XL,t.value]]),s[5]||(s[5]=(0,a.Lk)("label",{for:"sta"},"Wi-Fi Client (Station)",-1))]),"STA"===t.value?((0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("div",null,[s[6]||(s[6]=(0,a.Lk)("label",{for:"ssid"},"SSID:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"ssid","onUpdate:modelValue":s[2]||(s[2]=e=>l.value=e),placeholder:"Enter SSID"},null,512),[[n.Jo,l.value]])]),(0,a.Lk)("div",null,[s[7]||(s[7]=(0,a.Lk)("label",{for:"password"},"Password:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":s[3]||(s[3]=e=>i.value=e),placeholder:"Enter password"},null,512),[[n.Jo,i.value]])])])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:u},"Update Configuration")]))}};const L=(0,u.A)(w,[["__scopeId","data-v-827dcd0e"]]);var T=L;t(8111),t(2489),t(1701);const C={class:"mqtt-data"},S={key:0};var E={__name:"MqttData",setup(e){const o=(0,b.KR)({enabled:!1,broker:"",port:1883,login:"",password:"",topics:""}),t=(0,b.KR)(""),l=async()=>{try{const e=await fetch("/api/v1/mqtt");if(!e.ok)throw new Error("Failed to fetch configuration");const t=await e.json();o.value.enabled=t.enabled,o.value.broker=t.broker,o.value.port=t.port,o.value.login=t.login,o.value.password="",o.value.topics=Array.isArray(t.topics)?t.topics.join(","):t.topics}catch(e){t.value=e.message}},i=async()=>{try{const e={enabled:o.value.enabled,host:o.value.broker,port:o.value.port,login:o.value.login,password:o.value.password,topics:o.value.topics.split(",").map((e=>e.trim())).filter((e=>""!==e))},n=await fetch("/api/v1/mqtt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const e=await n.text();throw new Error(e||"Failed to save configuration")}t.value="Configuration saved successfully"}catch(e){t.value=e.message}};return(0,a.sV)((()=>{l()})),(e,l)=>((0,a.uX)(),(0,a.CE)("div",C,[l[13]||(l[13]=(0,a.Lk)("h2",null,"MQTT Configuration",-1)),(0,a.Lk)("form",{onSubmit:(0,n.D$)(i,["prevent"])},[(0,a.Lk)("div",null,[l[6]||(l[6]=(0,a.Lk)("label",{for:"enabled"},"Enable MQTT:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"checkbox",id:"enabled","onUpdate:modelValue":l[0]||(l[0]=e=>o.value.enabled=e)},null,512),[[n.lH,o.value.enabled]])]),(0,a.Lk)("div",null,[l[7]||(l[7]=(0,a.Lk)("label",{for:"broker"},"Broker Address:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"broker","onUpdate:modelValue":l[1]||(l[1]=e=>o.value.broker=e),placeholder:"e.g. 192.168.1.10"},null,512),[[n.Jo,o.value.broker]])]),(0,a.Lk)("div",null,[l[8]||(l[8]=(0,a.Lk)("label",{for:"port"},"Port:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"port","onUpdate:modelValue":l[2]||(l[2]=e=>o.value.port=e),placeholder:"1883"},null,512),[[n.Jo,o.value.port,void 0,{number:!0}]])]),(0,a.Lk)("div",null,[l[9]||(l[9]=(0,a.Lk)("label",{for:"login"},"Login:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"login","onUpdate:modelValue":l[3]||(l[3]=e=>o.value.login=e)},null,512),[[n.Jo,o.value.login]])]),(0,a.Lk)("div",null,[l[10]||(l[10]=(0,a.Lk)("label",{for:"password"},"Password:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":l[4]||(l[4]=e=>o.value.password=e)},null,512),[[n.Jo,o.value.password]])]),(0,a.Lk)("div",null,[l[11]||(l[11]=(0,a.Lk)("label",{for:"topics"},"Topics (comma separated):",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"topics","onUpdate:modelValue":l[5]||(l[5]=e=>o.value.topics=e)},null,512),[[n.Jo,o.value.topics]])]),l[12]||(l[12]=(0,a.Lk)("button",{type:"submit"},"Save Configuration",-1))],32),t.value?((0,a.uX)(),(0,a.CE)("p",S,(0,r.v_)(t.value),1)):(0,a.Q3)("",!0)]))}};const _=(0,u.A)(E,[["__scopeId","data-v-48c86c96"]]);var A=_,O={name:"App",components:{Block:d,Results:k,WifiConfig:T,MqttData:A},data(){return{isPlaying:!1,delay:null,score:null,showResult:!1,displayValue:null}},methods:{start(){this.delay=2e3+5e3*Math.random(),this.isPlaying=!0,this.showResult=!1},endGame(e){this.score=e,this.isPlaying=!1,this.showResult=!0,m.A.post("/api/v1/score/my_score",{score:this.number}).then((e=>{console.log("Response from ESP32:",e.data)})).catch((e=>{console.error("Error sending data:",e)}))},closeScore(){this.showResult=!1}},mounted(){m.A.get("/api/v1/display").then((e=>{this.displayValue=e.data.display})).catch((e=>{console.error("Error fetching display value:",e)}))}};const P=(0,u.A)(O,[["render",l]]);var j=P;(0,n.Ef)(j).mount("#app")}},o={};function t(n){var a=o[n];if(void 0!==a)return a.exports;var r=o[n]={exports:{}};return e[n].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(o,n,a,r){if(!n){var l=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],r=e[c][2];for(var i=!0,s=0;s<n.length;s++)(!1&r||l>=r)&&Object.keys(t.O).every((function(e){return t.O[e](n[s])}))?n.splice(s--,1):(i=!1,r<l&&(l=r));if(i){e.splice(c--,1);var u=a();void 0!==u&&(o=u)}}return o}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,a,r]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(o){return 0===e[o]};var o=function(o,n){var a,r,l=n[0],i=n[1],s=n[2],u=0;if(l.some((function(o){return 0!==e[o]}))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(s)var c=s(t)}for(o&&o(n);u<l.length;u++)r=l[u],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},n=self["webpackChunkreaction_timer"]=self["webpackChunkreaction_timer"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(6778)}));n=t.O(n)})();