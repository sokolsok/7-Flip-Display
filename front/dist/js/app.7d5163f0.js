(function(){"use strict";var e={497:function(e,t,o){var a=o(5130),n=o(6768),r=o(4232);function i(e,t,o,a,i,l){const s=(0,n.g2)("UpdateCheck"),u=(0,n.g2)("WifiConfig"),c=(0,n.g2)("MqttData");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("h1",null,"7-Flip Display v.0.1 ("+(0,r.v_)(i.displayValue)+") ",1),(0,n.bF)(s),t[1]||(t[1]=(0,n.Lk)("br",null,null,-1)),t[2]||(t[2]=(0,n.Lk)("br",null,null,-1)),t[3]||(t[3]=(0,n.Lk)("input",{type:"text",id:"number"},null,-1)),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.endGame&&l.endGame(...e))},"Send"),(0,n.bF)(u),(0,n.bF)(c)],64)}function l(e,t,o,a,r,i){return r.showBlock?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"block",onClick:t[0]||(t[0]=(...e)=>i.stopTimer&&i.stopTimer(...e))}," click me ")):(0,n.Q3)("",!0)}var s={props:["delay"],data(){return{showBlock:!1,timer:null,reactionTime:0}},mounted(){setTimeout((()=>{this.showBlock=!0,this.startTimer()}),this.delay)},methods:{startTimer(){this.timer=setInterval((()=>{this.reactionTime+=10}),10)},stopTimer(){clearInterval(this.timer),this.$emit("end",this.reactionTime)}}},u=o(1241);const c=(0,u.A)(s,[["render",l]]);var d=c;const p={class:"ersult"};function v(e,t,o,i,l,s){return(0,n.uX)(),(0,n.CE)("div",{class:"backdrop",onClick:t[0]||(t[0]=(0,a.D$)(((...e)=>s.closeScore&&s.closeScore(...e)),["self"]))},[(0,n.Lk)("div",p,[t[1]||(t[1]=(0,n.Lk)("p",null,"Twój czas to:",-1)),(0,n.Lk)("h1",null,(0,r.v_)(o.score),1)])])}var f={props:["score"],methods:{closeScore(){this.$emit("close")}}};const m=(0,u.A)(f,[["render",v]]);var h=m,k=o(4373),b=o(144);const w={class:"wifi-config"},y={key:0};var g={__name:"WifiConfig",setup(e){const t=(0,b.KR)(""),o=(0,b.KR)("AP"),i=(0,b.KR)(""),l=(0,b.KR)("");async function s(){try{const e=await fetch("/api/v1/mode");if(e.ok){const a=await e.json();t.value=a.mode,o.value=a.mode,i.value=a.ssid||"",l.value=""}else console.error("Failed to fetch configuration")}catch(e){console.error("Error fetching configuration:",e)}}async function u(){const e={mode:o.value};"STA"===o.value&&(e.ssid=i.value,e.password=l.value);try{const t=await fetch("/api/v1/mode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const e=await t.text();alert(e)}else alert("Failed to update configuration")}catch(t){console.error("Error updating configuration:",t),alert("Error updating configuration")}}return(0,n.sV)((()=>{s()})),(e,s)=>((0,n.uX)(),(0,n.CE)("div",w,[s[8]||(s[8]=(0,n.Lk)("h2",null,"Wi-Fi Configuration",-1)),(0,n.Lk)("div",null,[(0,n.Lk)("label",null,"Current Mode: "+(0,r.v_)(t.value),1)]),(0,n.Lk)("div",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"ap",value:"AP","onUpdate:modelValue":s[0]||(s[0]=e=>o.value=e)},null,512),[[a.XL,o.value]]),s[4]||(s[4]=(0,n.Lk)("label",{for:"ap"},"Access Point (Hotspot)",-1)),(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"sta",value:"STA","onUpdate:modelValue":s[1]||(s[1]=e=>o.value=e)},null,512),[[a.XL,o.value]]),s[5]||(s[5]=(0,n.Lk)("label",{for:"sta"},"Wi-Fi Client (Station)",-1))]),"STA"===o.value?((0,n.uX)(),(0,n.CE)("div",y,[(0,n.Lk)("div",null,[s[6]||(s[6]=(0,n.Lk)("label",{for:"ssid"},"SSID:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"ssid","onUpdate:modelValue":s[2]||(s[2]=e=>i.value=e),placeholder:"Enter SSID"},null,512),[[a.Jo,i.value]])]),(0,n.Lk)("div",null,[s[7]||(s[7]=(0,n.Lk)("label",{for:"password"},"Password:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":s[3]||(s[3]=e=>l.value=e),placeholder:"Enter password"},null,512),[[a.Jo,l.value]])])])):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:u},"Update Configuration")]))}};const L=(0,u.A)(g,[["__scopeId","data-v-827dcd0e"]]);var T=L;o(8111),o(2489),o(1701);const C={class:"mqtt-data"},S={key:0};var j={__name:"MqttData",setup(e){const t=(0,b.KR)({enabled:!1,broker:"",port:1883,login:"",password:"",topics:""}),o=(0,b.KR)(""),i=async()=>{try{const e=await fetch("/api/v1/mqtt");if(!e.ok)throw new Error("Failed to fetch configuration");const o=await e.json();t.value.enabled=o.enabled,t.value.broker=o.broker,t.value.port=o.port,t.value.login=o.login,t.value.password="",t.value.topics=Array.isArray(o.topics)?o.topics.join(","):o.topics}catch(e){o.value=e.message}},l=async()=>{try{const e={enabled:t.value.enabled,host:t.value.broker,port:t.value.port,login:t.value.login,password:t.value.password,topics:t.value.topics.split(",").map((e=>e.trim())).filter((e=>""!==e))},a=await fetch("/api/v1/mqtt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){const e=await a.text();throw new Error(e||"Failed to save configuration")}o.value="Configuration saved successfully"}catch(e){o.value=e.message}};return(0,n.sV)((()=>{i()})),(e,i)=>((0,n.uX)(),(0,n.CE)("div",C,[i[13]||(i[13]=(0,n.Lk)("h2",null,"MQTT Configuration",-1)),(0,n.Lk)("form",{onSubmit:(0,a.D$)(l,["prevent"])},[(0,n.Lk)("div",null,[i[6]||(i[6]=(0,n.Lk)("label",{for:"enabled"},"Enable MQTT:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",id:"enabled","onUpdate:modelValue":i[0]||(i[0]=e=>t.value.enabled=e)},null,512),[[a.lH,t.value.enabled]])]),(0,n.Lk)("div",null,[i[7]||(i[7]=(0,n.Lk)("label",{for:"broker"},"Broker Address:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"broker","onUpdate:modelValue":i[1]||(i[1]=e=>t.value.broker=e),placeholder:"e.g. 192.168.1.10"},null,512),[[a.Jo,t.value.broker]])]),(0,n.Lk)("div",null,[i[8]||(i[8]=(0,n.Lk)("label",{for:"port"},"Port:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"port","onUpdate:modelValue":i[2]||(i[2]=e=>t.value.port=e),placeholder:"1883"},null,512),[[a.Jo,t.value.port,void 0,{number:!0}]])]),(0,n.Lk)("div",null,[i[9]||(i[9]=(0,n.Lk)("label",{for:"login"},"Login:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"login","onUpdate:modelValue":i[3]||(i[3]=e=>t.value.login=e)},null,512),[[a.Jo,t.value.login]])]),(0,n.Lk)("div",null,[i[10]||(i[10]=(0,n.Lk)("label",{for:"password"},"Password:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":i[4]||(i[4]=e=>t.value.password=e)},null,512),[[a.Jo,t.value.password]])]),(0,n.Lk)("div",null,[i[11]||(i[11]=(0,n.Lk)("label",{for:"topics"},"Topics (comma separated):",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"topics","onUpdate:modelValue":i[5]||(i[5]=e=>t.value.topics=e)},null,512),[[a.Jo,t.value.topics]])]),i[12]||(i[12]=(0,n.Lk)("button",{type:"submit"},"Save Configuration",-1))],32),o.value?((0,n.uX)(),(0,n.CE)("p",S,(0,r.v_)(o.value),1)):(0,n.Q3)("",!0)]))}};const O=(0,u.A)(j,[["__scopeId","data-v-48c86c96"]]);var A=O;const E=["disabled"];function V(e,t,o,a,i,l){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("p",null,(0,r.v_)(i.message),1),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.checkFirmwareVersion&&l.checkFirmwareVersion(...e))},"Sprawdź wersję firmware"),(0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.startOTA&&l.startOTA(...e)),disabled:!i.firmwareVersion}," Rozpocznij OTA ",8,E)])}var _={data(){return{message:"Kliknij przycisk, aby sprawdzić wersję firmware",firmwareVersion:null}},methods:{async checkFirmwareVersion(){try{const e=await fetch("https://download.smartsolutions4home.com/7-flip-firmware/version.json");if(!e.ok)throw new Error("Brak dostępu do serwera");const t=await e.json();this.firmwareVersion=t.version,this.message=`Dostępna wersja: ${t.version}`}catch(e){this.message=`Wystąpił błąd: ${e.message}`}},async startOTA(){if(!this.firmwareVersion)return void(this.message="Najpierw sprawdź wersję firmware!");const e=`https://download.smartsolutions4home.com/7-flip-firmware/firmware_v${this.firmwareVersion}.bin`;try{const t=await fetch("/api/v1/ota",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})});if(!t.ok)throw new Error("Błąd podczas wywoływania OTA");const o=await t.text();this.message=o}catch(t){this.message=`Wystąpił błąd: ${t.message}`}}}};const P=(0,u.A)(_,[["render",V],["__scopeId","data-v-7b1e1736"]]);var F=P,x={name:"App",components:{Block:d,Results:h,WifiConfig:T,MqttData:A,UpdateCheck:F},data(){return{isPlaying:!1,delay:null,score:null,showResult:!1,displayValue:null}},methods:{start(){this.delay=2e3+5e3*Math.random(),this.isPlaying=!0,this.showResult=!1},endGame(e){this.score=e,this.isPlaying=!1,this.showResult=!0,k.A.post("/api/v1/score/my_score",{score:this.number}).then((e=>{console.log("Response from ESP32:",e.data)})).catch((e=>{console.error("Error sending data:",e)}))},closeScore(){this.showResult=!1}},mounted(){k.A.get("/api/v1/display").then((e=>{this.displayValue=e.data.display})).catch((e=>{console.error("Error fetching display value:",e)}))}};const R=(0,u.A)(x,[["render",i]]);var U=R;(0,a.Ef)(U).mount("#app")}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,a,n,r){if(!a){var i=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],r=e[c][2];for(var l=!0,s=0;s<a.length;s++)(!1&r||i>=r)&&Object.keys(o.O).every((function(e){return o.O[e](a[s])}))?a.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,n,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,r,i=a[0],l=a[1],s=a[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(s)var c=s(o)}for(t&&t(a);u<i.length;u++)r=i[u],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},a=self["webpackChunkreaction_timer"]=self["webpackChunkreaction_timer"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(497)}));a=o.O(a)})();